<script>
  // Jahr im Footer
  document.getElementById('year').textContent = new Date().getFullYear();

  /* ----------------------------------------------
   * Automatische Größenanpassung vorübergehend deaktiviert
   * (bei Bedarf diesen Block wieder aktivieren)
   *
   * function autoResizeIframe(iframe){
   *   const resize = () => {
   *     try{
   *       const doc = iframe.contentDocument || iframe.contentWindow.document;
   *       if(!doc) return;
   *       const body = doc.body, html = doc.documentElement;
   *       const h = Math.max(body ? body.scrollHeight : 0, html ? html.scrollHeight : 0, 120);
   *       const w = Math.max(body ? body.scrollWidth  : 0, html ? html.scrollWidth  : 0, 320);
   *       iframe.style.height = h + 'px';
   *       iframe.style.width  = w + 'px';
   *       iframe.style.maxWidth = '100%';
   *     }catch(e){}
   *   };
   *   resize();
   *   setTimeout(resize, 300);
   *   setTimeout(resize, 800);
   *   setTimeout(resize, 1600);
   *   try{
   *     const doc = iframe.contentDocument || iframe.contentWindow.document;
   *     const obs = new MutationObserver(resize);
   *     obs.observe(doc.documentElement,{childList:true,subtree:true,attributes:true});
   *   }catch(e){}
   * }
   * ---------------------------------------------- */

  // Setup + Filter + Review-Helper (ohne Auto-Resize)
  window.addEventListener('DOMContentLoaded', () => {
    // Deaktiviert:
    // document.querySelectorAll('.sig-frame').forEach(f=>{
    //   f.addEventListener('load', () => autoResizeIframe(f));
    //   setTimeout(() => autoResizeIframe(f), 100);
    // });

    // Filter (Alle / Einzelperson / Team)
    const filterLinks = document.querySelectorAll('nav.filter .chip[data-filter]');
    function applyFilter(cat){
      document.querySelectorAll('section.card').forEach(sec=>{
        const sCat = sec.getAttribute('data-cat') || 'all';
        sec.style.display = (cat==='all' || sCat===cat) ? '' : 'none';
      });
    }
    filterLinks.forEach(link=>{
      link.addEventListener('click', (e)=>{
        e.preventDefault();
        const cat = link.getAttribute('data-filter');
        applyFilter(cat);
        filterLinks.forEach(l=>l.classList.remove('active'));
        link.classList.add('active');
      });
    });
    applyFilter('all');

    // Alle Varianten in Tabs öffnen
    document.getElementById('open-all')?.addEventListener('click', (e)=>{
      e.preventDefault();
      document.querySelectorAll('.controls a[target="_blank"]').forEach(a=>{
        window.open(a.href, '_blank', 'noopener');
      });
    });
  });
</script>
